@import "tailwindcss";

@theme {
  --color-cream: #F7F6F3;
}

:root {
  --background: #ffffff;
  --foreground: #171717;
  --card: #ffffff;
  --card-foreground: #171717;
  --primary: #171717;
  --primary-light: #404040;
  --primary-foreground: #ffffff;
  --secondary: #475093;
  --secondary-light: #6B74B5;
  --muted: #F5F5F5;
  --muted-foreground: #737373;
  --border: #E5E5E5;
  --accent: #FF5A39;
  --accent-light: #FF9E75;
  --success: #22C55E;
  --danger: #EF4444;

  --font-body: 'Inter', system-ui, -apple-system, sans-serif;
  --font-display: 'Inter', system-ui, -apple-system, sans-serif;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-body);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ─── Student pages ──────────────────────────────────── */
.student-ui {
  font-family: var(--font-body);
}
.student-ui h1,
.student-ui h2,
.student-ui h3 {
  font-family: var(--font-body);
  letter-spacing: -0.02em;
}

/* ─── Sidebar ─────────────────────────────────────────── */
.sidebar-link {
  transition: all 0.15s ease;
}

.sidebar-link:hover {
  background: #F5F5F5;
}

.sidebar-link.active {
  background: #F5F5F5;
  color: var(--foreground);
  font-weight: 600;
}

/* ─── Card hover ──────────────────────────────────────── */
.card-hover {
  transition: all 0.2s ease;
}

.card-hover:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.06);
}

/* ─── Progress bar ────────────────────────────────────── */
.progress-fill {
  transition: width 0.6s ease-out;
}

/* ─── Badge glow ──────────────────────────────────────── */
.badge-earned {
  animation: badge-glow 2s ease-in-out infinite alternate;
}

@keyframes badge-glow {
  from { box-shadow: 0 0 4px rgba(255, 90, 57, 0.15); }
  to { box-shadow: 0 0 12px rgba(255, 90, 57, 0.3); }
}

/* ─── Page transition ─────────────────────────────────── */
main {
  animation: fadeIn 0.15s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(3px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ─── Game timer ──────────────────────────────────────── */
.animate-shrink {
  animation: shrink linear forwards;
}

@keyframes shrink {
  from { width: 100%; }
  to { width: 0%; }
}

/* ─── Game pulse ──────────────────────────────────────── */
@keyframes game-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.game-pulse {
  animation: game-pulse 0.3s ease-in-out;
}

/* ─── Animations ──────────────────────────────────────── */
@keyframes bounce-in {
  0% { transform: scale(0.5); opacity: 0; }
  70% { transform: scale(1.05); }
  100% { transform: scale(1); opacity: 1; }
}

.animate-bounce-in {
  animation: bounce-in 0.4s ease-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

@keyframes pop {
  0% { transform: scale(0.95); opacity: 0.8; }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); opacity: 1; }
}

.animate-pop {
  animation: pop 0.3s ease-out;
}

@keyframes confetti-fall {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

.animate-confetti {
  animation: confetti-fall 2s ease-out forwards;
}

/* ─── Adventure Map ──────────────────────────────────── */

/* Node pulse glow (current level) */
@keyframes map-node-pulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
  50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.15; }
}

.map-node-pulse {
  animation: map-node-pulse 2s ease-in-out infinite;
}

/* Avatar floating bounce */
@keyframes map-avatar-float {
  0%, 100% { transform: translate(-50%, -130%) translateY(0); }
  50% { transform: translate(-50%, -130%) translateY(-6px); }
}

.map-avatar-float {
  animation: map-avatar-float 2.5s ease-in-out infinite;
}

/* Road dashed center line animation */
@keyframes map-road-dash {
  0% { stroke-dashoffset: 0; }
  100% { stroke-dashoffset: 36; }
}

.map-road-dash {
  animation: map-road-dash 2s linear infinite;
}

/* Completed road subtle glow pulse */
@keyframes map-road-glow {
  0%, 100% { opacity: 0.2; }
  50% { opacity: 0.35; }
}

.map-road-glow {
  animation: map-road-glow 3s ease-in-out infinite;
}

/* Castle flag wave */
@keyframes map-flag-wave {
  0%, 100% { transform: scaleX(1); }
  25% { transform: scaleX(1.05) skewX(-2deg); }
  75% { transform: scaleX(0.95) skewX(2deg); }
}

.map-flag-wave {
  transform-origin: left center;
  animation: map-flag-wave 2s ease-in-out infinite;
}

/* ─── Cloud drift animations (3 speeds for parallax) ── */
@keyframes cloud-drift-slow {
  0% { transform: translateX(-15px); }
  50% { transform: translateX(15px); }
  100% { transform: translateX(-15px); }
}

@keyframes cloud-drift-med {
  0% { transform: translateX(20px); }
  50% { transform: translateX(-20px); }
  100% { transform: translateX(20px); }
}

@keyframes cloud-drift-fast {
  0% { transform: translateX(-25px) translateY(-3px); }
  33% { transform: translateX(10px) translateY(3px); }
  66% { transform: translateX(25px) translateY(-2px); }
  100% { transform: translateX(-25px) translateY(-3px); }
}

.cloud-drift-1 {
  animation: cloud-drift-slow 45s ease-in-out infinite;
}

.cloud-drift-2 {
  animation: cloud-drift-med 55s ease-in-out infinite;
}

.cloud-drift-3 {
  animation: cloud-drift-fast 65s ease-in-out infinite;
}

/* ─── Map creature animations ────────────────────────── */

/* Flying bird — float up and down + subtle horizontal */
@keyframes map-fly {
  0%, 100% { transform: translateY(0) translateX(0); }
  25% { transform: translateY(-6px) translateX(4px); }
  50% { transform: translateY(-2px) translateX(8px); }
  75% { transform: translateY(-8px) translateX(3px); }
}

.map-fly {
  animation: map-fly 4s ease-in-out infinite;
}

/* Rabbit hop */
@keyframes map-hop {
  0%, 70%, 100% { transform: translateY(0); }
  80% { transform: translateY(-5px); }
  90% { transform: translateY(0); }
}

.map-hop {
  animation: map-hop 5s ease-in-out infinite;
}

/* Butterfly flutter — wobbly flight */
@keyframes map-flutter {
  0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
  20% { transform: translateY(-8px) translateX(5px) rotate(5deg); }
  40% { transform: translateY(-3px) translateX(10px) rotate(-3deg); }
  60% { transform: translateY(-10px) translateX(4px) rotate(4deg); }
  80% { transform: translateY(-5px) translateX(-2px) rotate(-2deg); }
}

.map-flutter {
  animation: map-flutter 6s ease-in-out infinite;
}

/* ─── Hide scrollbar utility ─────────────────────────── */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* ─── Custom scrollbar ────────────────────────────────── */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #D4D4D4;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #A3A3A3;
}

/* ─── Primary button (dark) ───────────────────────────── */
.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: #171717;
  color: white;
  font-weight: 600;
  border-radius: 9999px;
  padding: 10px 20px;
  font-size: 14px;
  transition: all 0.15s ease;
  cursor: pointer;
  text-decoration: none;
}
.btn-primary:hover {
  background: #404040;
}
.btn-primary:active {
  transform: scale(0.98);
}

/* ─── Kids button ─────────────────────────────────────── */
.btn-kids {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-family: var(--font-body);
  font-weight: 600;
  border-radius: 9999px;
  min-height: 44px;
  padding: 10px 24px;
  font-size: 14px;
  transition: all 0.15s ease;
  cursor: pointer;
  text-decoration: none;
  line-height: 1;
}
.btn-kids:hover {
  opacity: 0.88;
}
.btn-kids:active {
  transform: scale(0.97);
}

/* ─── Outline button ──────────────────────────────────── */
.btn-outline {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: white;
  color: #171717;
  border: 1px solid #E5E5E5;
  font-weight: 600;
  border-radius: 9999px;
  padding: 10px 20px;
  font-size: 14px;
  transition: all 0.15s ease;
  cursor: pointer;
  text-decoration: none;
}
.btn-outline:hover {
  background: #F5F5F5;
}
.btn-outline:active {
  transform: scale(0.98);
}

/* ─── Game card ────────────────────────────────────────── */
.game-card-kids {
  border-radius: 16px;
  overflow: hidden;
  transition: all 0.2s ease;
  border: none;
  background: var(--color-cream);
}
.game-card-kids:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -8px rgba(0, 0, 0, 0.06);
}

/* ─── Pill tab ────────────────────────────────────────── */
.pill-tab {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 7px 14px;
  font-size: 13px;
  font-weight: 500;
  border-radius: 9999px;
  border: none;
  background: transparent;
  color: #737373;
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
}
.pill-tab:hover {
  color: #171717;
  background: var(--color-cream);
}
.pill-tab.active {
  background: #171717;
  color: white;
}

/* ─── Focus styles ────────────────────────────────────── */
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.08);
  border-color: #A3A3A3;
}

/* ─── Text gradient ───────────────────────────────────── */
.text-gradient-orange {
  background: linear-gradient(135deg, #FF5A39, #FF9E75);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ═══════════════════════════════════════════════════════════
   GAMIFIED MODE ANIMATIONS
   ═══════════════════════════════════════════════════════════ */

/* ─── Player animations ────────────────────────────────── */
@keyframes run-bob {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}
.animate-run-bob { animation: run-bob 0.35s ease-in-out infinite; }

@keyframes arm-swing {
  0%, 100% { transform: rotate(-15deg); }
  50% { transform: rotate(15deg); }
}
.animate-arm-swing { transform-origin: right center; animation: arm-swing 0.35s ease-in-out infinite; }
.animate-arm-swing-reverse { transform-origin: left center; animation: arm-swing 0.35s ease-in-out infinite reverse; }

@keyframes leg-run {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}
.animate-leg-run { animation: leg-run 0.35s ease-in-out infinite; }
.animate-leg-run-reverse { animation: leg-run 0.35s ease-in-out infinite reverse; }

/* ─── Boss animations ──────────────────────────────────── */
@keyframes boss-idle {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-8px) scale(1.03); }
}
.animate-boss-idle { animation: boss-idle 1.2s ease-in-out infinite; }

@keyframes boss-death {
  0% { transform: scale(1) rotate(0deg); opacity: 1; filter: brightness(1); }
  20% { transform: scale(1.15) rotate(5deg); opacity: 1; filter: brightness(2); }
  40% { transform: scale(1.1) rotate(-8deg); opacity: 0.8; filter: brightness(1.5) saturate(0.5); }
  60% { transform: scale(0.8) rotate(15deg); opacity: 0.5; filter: brightness(1) saturate(0); }
  80% { transform: scale(0.4) rotate(30deg); opacity: 0.2; filter: brightness(0.5); }
  100% { transform: scale(0) rotate(180deg); opacity: 0; }
}
.animate-boss-death { animation: boss-death 1s ease-in forwards; }

@keyframes boss-hurt {
  0% { transform: translateX(0) scale(1); filter: brightness(1); }
  10% { transform: translateX(-8px) scale(1.05); filter: brightness(2) saturate(0); }
  20% { transform: translateX(10px) scale(0.95); filter: brightness(1.5); }
  30% { transform: translateX(-6px) scale(1.02); filter: brightness(2) saturate(0); }
  40% { transform: translateX(6px); filter: brightness(1.3); }
  50% { transform: translateX(-4px); filter: brightness(1.8) saturate(0); }
  70% { transform: translateX(2px); filter: brightness(1.2); }
  100% { transform: translateX(0) scale(1); filter: brightness(1); }
}
.animate-boss-hurt { animation: boss-hurt 0.6s ease-out; }

@keyframes boss-attack {
  0% { transform: translateX(0) scale(1); }
  15% { transform: translateX(-15px) scale(1.1); }
  30% { transform: translateX(25px) scale(1.15); }
  50% { transform: translateX(0) scale(1.05); }
  100% { transform: translateX(0) scale(1); }
}
.animate-boss-attack { animation: boss-attack 0.5s ease-out; }

@keyframes boss-explode {
  0% { transform: scale(0); opacity: 1; }
  30% { transform: scale(1.5); opacity: 0.9; }
  60% { transform: scale(2); opacity: 0.5; }
  100% { transform: scale(2.5); opacity: 0; }
}
.animate-boss-explode { animation: boss-explode 0.8s ease-out forwards; }

/* ─── Damage effects ───────────────────────────────────── */
@keyframes damage-flash {
  0% { opacity: 0.4; }
  50% { opacity: 0; }
  100% { opacity: 0.3; }
}
.animate-damage-flash { animation: damage-flash 0.3s ease-out 2; }

/* ─── UI animations ────────────────────────────────────── */
@keyframes block-hit {
  0% { transform: translateY(0); }
  25% { transform: translateY(-12px); }
  100% { transform: translateY(0); }
}
.animate-block-hit { animation: block-hit 0.3s ease-out; }

@keyframes coin-spin {
  0% { transform: scaleX(1); }
  25% { transform: scaleX(0.2); }
  50% { transform: scaleX(1); }
  75% { transform: scaleX(0.2); }
  100% { transform: scaleX(1); }
}
.animate-coin-spin { animation: coin-spin 2s ease-in-out infinite; }

@keyframes poof {
  0% { transform: scale(0); opacity: 1; }
  50% { transform: scale(1.5); opacity: 0.8; }
  100% { transform: scale(2); opacity: 0; }
}
.animate-poof { animation: poof 0.6s ease-out forwards; }

@keyframes slide-in-right {
  0% { transform: translateX(100%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}
.animate-slide-in-right { animation: slide-in-right 0.5s ease-out; }

@keyframes card-deal {
  0% { transform: translateY(-50px) rotateY(180deg) scale(0.5); opacity: 0; }
  60% { transform: translateY(5px) rotateY(0deg) scale(1.05); opacity: 1; }
  100% { transform: translateY(0) rotateY(0deg) scale(1); opacity: 1; }
}
.animate-card-deal { animation: card-deal 0.6s ease-out; }

@keyframes card-deal-delay {
  0%, 30% { transform: translateY(-50px) rotateY(180deg) scale(0.5); opacity: 0; }
  80% { transform: translateY(5px) rotateY(0deg) scale(1.05); opacity: 1; }
  100% { transform: translateY(0) rotateY(0deg) scale(1); opacity: 1; }
}
.animate-card-deal-delay { animation: card-deal-delay 0.8s ease-out; }

@keyframes walk-forward {
  0% { transform: translateX(0); }
  100% { transform: translateX(var(--walk-distance, 100px)); }
}
.animate-walk-forward { animation: walk-forward 1s ease-in-out forwards; }

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  75% { transform: translateX(6px); }
}
.animate-shake { animation: shake 0.4s ease-in-out; }

@keyframes float-up {
  0% { transform: translateY(0); opacity: 1; }
  100% { transform: translateY(-40px); opacity: 0; }
}
.animate-float-up { animation: float-up 1s ease-out forwards; }

@keyframes pop-in {
  0% { transform: scale(0); }
  70% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
.animate-pop-in { animation: pop-in 0.3s ease-out; }

@keyframes twinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.9; }
}

@keyframes walk-right {
  0% { transform: translateX(0); }
  100% { transform: translateX(var(--walk-dist, 60px)); }
}
.animate-walk-right { animation: walk-right 0.8s ease-in-out forwards; }

/* ─── World theme effects ──────────────────────────────── */
@keyframes firefly {
  0%, 100% { opacity: 0; transform: translate(0, 0); }
  25% { opacity: 0.8; transform: translate(10px, -15px); }
  50% { opacity: 0.4; transform: translate(-8px, -25px); }
  75% { opacity: 0.9; transform: translate(12px, -10px); }
}

@keyframes snowfall {
  0% { transform: translateY(-20px) translateX(0) rotate(0deg); opacity: 0.8; }
  50% { transform: translateY(50vh) translateX(15px) rotate(180deg); opacity: 0.6; }
  100% { transform: translateY(100vh) translateX(-10px) rotate(360deg); opacity: 0; }
}

@keyframes ember-rise {
  0% { opacity: 0.8; transform: translateY(0) translateX(0); }
  50% { opacity: 0.5; transform: translateY(-60px) translateX(10px); }
  100% { opacity: 0; transform: translateY(-120px) translateX(-5px); }
}

@keyframes sparkle {
  0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
  25% { opacity: 0.8; transform: scale(1) rotate(45deg); }
  50% { opacity: 0.4; transform: scale(1.2) rotate(90deg); }
  75% { opacity: 0.9; transform: scale(0.8) rotate(135deg); }
}

/* ─── Pixel art rendering ──────────────────────────────── */
.pixelated {
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* ═══════════════════════════════════════════════════════════
   Game HUD & UI System
   ═══════════════════════════════════════════════════════════ */

/* RPG text base */
.rpg-text {
  font-family: 'Fredoka', 'Trebuchet MS', sans-serif;
  font-weight: 700;
  text-shadow: 1px 1px 0 rgba(0,0,0,0.4);
  letter-spacing: 0.02em;
}

/* ─── HP Bar Frame (boss health, top center) ───────────── */
.hud-hp-frame {
  position: relative;
  background: linear-gradient(180deg, #1c1014 0%, #0e080a 100%);
  border: 2px solid #5a3e1e;
  border-radius: 6px;
  padding: 6px 10px 8px;
  box-shadow:
    0 0 0 1px #2a1a0c,
    0 3px 10px rgba(0,0,0,0.6),
    inset 0 1px 0 rgba(255,200,80,0.08);
}
.hud-hp-frame::before {
  content: '';
  position: absolute;
  inset: 2px;
  border: 1px solid rgba(180,140,60,0.12);
  border-radius: 4px;
  pointer-events: none;
}
.hud-boss-name {
  text-align: center;
  margin-bottom: 4px;
}
.hud-boss-name span {
  font-family: 'Fredoka', sans-serif;
  font-size: 10px;
  font-weight: 700;
  color: #c8a050;
  text-transform: uppercase;
  letter-spacing: 2px;
  text-shadow: 0 1px 3px rgba(0,0,0,0.6);
}
.hud-hp-track {
  position: relative;
  height: 16px;
  background: linear-gradient(180deg, #180808 0%, #220e0e 50%, #140808 100%);
  border: 2px solid #5a3e1e;
  border-radius: 3px;
  overflow: hidden;
  box-shadow: inset 0 2px 6px rgba(0,0,0,0.7);
}
.hud-hp-fill {
  position: absolute;
  top: 0; left: 0; bottom: 0;
  background: linear-gradient(180deg, #e63946 0%, #c0272e 40%, #9b1b22 100%);
  transition: width 0.5s ease-out;
  border-radius: 2px;
}
.hud-hp-fill::before {
  content: '';
  position: absolute;
  top: 1px; left: 3px; right: 3px;
  height: 4px;
  background: linear-gradient(90deg, rgba(255,180,180,0.35), rgba(255,255,255,0.15));
  border-radius: 2px;
}
.hud-hp-fill::after {
  content: '';
  position: absolute;
  bottom: 1px; left: 3px; right: 3px;
  height: 2px;
  background: rgba(0,0,0,0.25);
  border-radius: 1px;
}
.hud-hp-seg {
  position: absolute;
  top: 0; bottom: 0;
  width: 1px;
  background: rgba(0,0,0,0.5);
  z-index: 1;
}
.hud-hp-count {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Fredoka', sans-serif;
  font-size: 9px;
  font-weight: 700;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.8), 0 0 4px rgba(0,0,0,0.4);
  letter-spacing: 1px;
  z-index: 2;
}

/* ─── Stat badge (points, streak, progress) ────────────── */
.hud-stat {
  position: relative;
  display: flex;
  align-items: center;
  gap: 4px;
  background: linear-gradient(180deg, #1c1014, #0e080a);
  border: 1px solid #5a3e1e;
  border-radius: 4px;
  padding: 3px 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,200,80,0.06);
  overflow: hidden;
}
.hud-stat-label {
  font-family: 'Fredoka', sans-serif;
  font-size: 8px;
  font-weight: 600;
  color: #8a6a3a;
  text-transform: uppercase;
  letter-spacing: 1px;
}
.hud-stat-value {
  font-family: 'Fredoka', sans-serif;
  font-size: 12px;
  font-weight: 700;
  color: #d4aa50;
  text-shadow: 0 1px 2px rgba(0,0,0,0.5);
  font-variant-numeric: tabular-nums;
}
.hud-stat-hot {
  border-color: #8b3a00;
  background: linear-gradient(180deg, #2a1008, #1a0804);
}
.hud-stat-hot .hud-stat-value {
  color: #ff8c32;
}

/* ─── Control buttons (Exit, Classic) ──────────────────── */
.hud-ctrl-btn {
  position: relative;
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 5px 10px;
  border-radius: 4px;
  font-family: 'Fredoka', sans-serif;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.12s;
  border: 2px solid;
  border-bottom-width: 3px;
  overflow: hidden;
}
.hud-ctrl-btn:active {
  transform: translateY(1px);
  border-bottom-width: 2px;
}
.hud-ctrl-btn:hover {
  filter: brightness(1.15);
}
.hud-ctrl-btn::before {
  content: '';
  position: absolute;
  top: 2px; left: 3px; right: 3px;
  height: 35%;
  background: rgba(255,255,255,0.1);
  border-radius: 2px 2px 0 0;
  pointer-events: none;
}
.hud-ctrl-exit {
  background: linear-gradient(180deg, #4a2020 0%, #3a1818 50%, #2a1010 100%);
  border-color: #1a0808;
  color: #cc8888;
  box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,150,150,0.08);
}
.hud-ctrl-mode {
  background: linear-gradient(180deg, #20304a 0%, #182838 50%, #101e2a 100%);
  border-color: #081018;
  color: #88aacc;
  box-shadow: 0 2px 6px rgba(0,0,0,0.5), inset 0 1px 0 rgba(150,200,255,0.08);
}

/* ─── Question Panel — medieval stone plaque ───────────── */
.qa-question-panel {
  background: linear-gradient(180deg, #4a3828 0%, #3a2a1c 40%, #2e2018 100%);
  border: 2px solid #8B6914;
  border-bottom-width: 3px;
  border-radius: 8px;
  padding: 14px 20px;
  color: #f0e6d0;
  text-align: center;
  box-shadow:
    0 4px 16px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,215,0,0.12),
    inset 0 -1px 0 rgba(0,0,0,0.3);
  position: relative;
}
.qa-question-panel::before {
  content: '';
  position: absolute;
  inset: 3px;
  border: 1px solid rgba(255,215,0,0.08);
  border-radius: 5px;
  pointer-events: none;
}

.qa-question {
  font-family: 'Fredoka', sans-serif;
  font-size: 16px;
  font-weight: 700;
  color: #f0e6d0;
  text-align: center;
  line-height: 1.4;
  text-shadow: 0 2px 4px rgba(0,0,0,0.6);
}
/* ─── Problem display block — shows the actual content the question refers to ── */
.qa-problem-block {
  margin-top: 10px;
  padding: 10px 14px;
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,215,0,0.12);
  border-radius: 6px;
  text-align: center;
}

.qa-passage {
  font-family: 'Fredoka', sans-serif;
  font-size: 14px;
  font-weight: 500;
  color: #e8dcc8;
  line-height: 1.6;
  text-shadow: 0 1px 2px rgba(0,0,0,0.4);
  text-align: left;
}

.qa-word-display {
  font-family: 'Fredoka', sans-serif;
  font-size: 28px;
  font-weight: 700;
  color: #FFD700;
  letter-spacing: 2px;
  text-shadow: 0 0 10px rgba(255,215,0,0.3), 0 2px 4px rgba(0,0,0,0.6);
}

.qa-hint-text {
  font-family: 'Fredoka', sans-serif;
  font-size: 12px;
  font-weight: 500;
  color: #c4a35a;
  margin-top: 4px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.4);
}

.qa-accent {
  color: #ff9966;
  font-weight: 700;
}

.qa-accent-underline {
  color: #FFD700;
  font-weight: 700;
  text-decoration: underline;
  text-decoration-color: rgba(255,215,0,0.5);
  text-underline-offset: 2px;
}

.qa-sound-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 4px 12px;
  background: linear-gradient(180deg, #5a4a30, #3a3020);
  border: 1px solid #8B6914;
  border-radius: 4px;
  font-family: 'Fredoka', sans-serif;
  font-size: 18px;
  font-weight: 700;
  color: #FFD700;
  text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}

.qa-letter-grid {
  display: grid;
  gap: 4px;
  margin-top: 8px;
  justify-content: center;
}
.qa-grid-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: rgba(0,0,0,0.3);
  border: 1px solid rgba(255,215,0,0.15);
  border-radius: 3px;
  font-family: 'Fredoka', sans-serif;
  font-size: 14px;
  font-weight: 600;
  color: #e8dcc8;
}

.qa-event-chip {
  padding: 6px 12px;
  background: rgba(0,0,0,0.2);
  border: 1px solid rgba(255,215,0,0.1);
  border-radius: 4px;
  font-family: 'Fredoka', sans-serif;
  font-size: 12px;
  font-weight: 500;
  color: #e8dcc8;
  text-align: left;
  text-shadow: 0 1px 2px rgba(0,0,0,0.4);
}

/* ─── Answer buttons — clean medieval RPG style ────────── */
.qa-answer-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: linear-gradient(180deg, #5a4430 0%, #3e2e20 50%, #2e2018 100%);
  border: 2px solid #8B6914;
  border-bottom-width: 3px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.12s ease;
  box-shadow:
    0 3px 8px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,215,0,0.1);
  min-height: 44px;
}
.qa-answer-btn:hover {
  background: linear-gradient(180deg, #6a5438 0%, #4e3a28 50%, #3a2818 100%);
  border-color: #b8860b;
  transform: translateY(-1px);
  box-shadow:
    0 5px 14px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,215,0,0.15),
    0 0 12px rgba(255,215,0,0.08);
}
.qa-answer-btn:active {
  transform: translateY(1px);
  border-bottom-width: 2px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.4);
}
.qa-answer-btn:disabled {
  opacity: 0.5;
  pointer-events: none;
}

.qa-answer-letter {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 26px;
  height: 26px;
  background: linear-gradient(180deg, #6B5014, #4a3810);
  border: 2px solid #FFD700;
  border-radius: 4px;
  font-family: 'Fredoka', sans-serif;
  font-size: 12px;
  font-weight: 800;
  color: #FFD700;
  text-shadow: 0 1px 2px rgba(0,0,0,0.6);
  box-shadow: 0 2px 4px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,215,0,0.2);
}

.qa-answer-text {
  flex: 1;
  font-family: 'Fredoka', sans-serif;
  font-size: 15px;
  font-weight: 700;
  color: #f0e6d0;
  text-shadow: 0 1px 3px rgba(0,0,0,0.6);
  line-height: 1.3;
  text-align: center;
  padding-right: 26px;
}

/* ─── Text input ───────────────────────────────────────── */
.qa-input {
  background: linear-gradient(180deg, #1e1610, #161008);
  border: 2px solid #5a3e1e;
  border-radius: 5px;
  padding: 8px 12px;
  font-family: 'Fredoka', sans-serif;
  font-weight: 600;
  font-size: 14px;
  color: #e0d0b8;
  text-align: center;
  box-shadow: inset 0 2px 6px rgba(0,0,0,0.4);
  outline: none;
}
.qa-input:focus {
  border-color: #8a6a30;
  box-shadow: inset 0 2px 6px rgba(0,0,0,0.4), 0 0 0 1px rgba(200,160,80,0.15);
}
.qa-input::placeholder {
  color: #6a5a40;
}

.qa-btn-submit {
  padding: 8px 16px;
  background: linear-gradient(180deg, #5a3e1e 0%, #3a2810 100%);
  border: 2px solid #8a6a30;
  border-bottom-width: 3px;
  border-radius: 5px;
  font-family: 'Fredoka', sans-serif;
  font-size: 12px;
  font-weight: 700;
  color: #d4aa50;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.12s;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}
.qa-btn-submit:hover {
  filter: brightness(1.15);
}
.qa-btn-submit:active {
  transform: translateY(1px);
  border-bottom-width: 2px;
}

/* ─── Result feedback ──────────────────────────────────── */
.qa-result {
  padding: 10px 28px;
  border-radius: 6px;
  border: 2px solid;
  box-shadow: 0 4px 20px rgba(0,0,0,0.6);
}
.qa-result-correct {
  background: linear-gradient(180deg, rgba(20,60,30,0.95), rgba(12,40,18,0.95));
  border-color: #4a8a30;
  box-shadow: 0 4px 20px rgba(0,0,0,0.6), inset 0 1px 0 rgba(150,255,100,0.08);
}
.qa-result-wrong {
  background: linear-gradient(180deg, rgba(60,18,18,0.95), rgba(40,10,10,0.95));
  border-color: #8a3030;
  box-shadow: 0 4px 20px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,100,100,0.08);
}
.qa-result-text {
  font-family: 'Fredoka', sans-serif;
  font-size: 16px;
  font-weight: 700;
  color: #e0d0b8;
  text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}
.qa-result-sub {
  font-family: 'Fredoka', sans-serif;
  font-size: 12px;
  font-weight: 600;
  color: rgba(224,208,184,0.7);
  margin-top: 2px;
}

/* Level node — static, no animation */
.map-node-current {
  /* intentionally no animation — static */
}

/* ═══════════════════════════════════════════════════════════════════════
   MEMORY GAME OVERLAY — Medieval RPG styled cells & controls
   ═══════════════════════════════════════════════════════════════════════ */

/* Grid Memory cells */
.mem-cell {
  width: 44px;
  height: 44px;
  border-radius: 6px;
  border: 2px solid rgba(139,105,20,0.4);
  cursor: pointer;
  transition: all 0.15s ease;
  font-family: 'Fredoka', sans-serif;
  font-weight: 700;
}
.mem-cell:disabled { cursor: default; }
.mem-cell-idle {
  background: linear-gradient(180deg, #4a3828, #3a2a1c);
  box-shadow: inset 0 1px 0 rgba(255,215,0,0.08), 0 2px 4px rgba(0,0,0,0.3);
}
.mem-cell-idle:hover:not(:disabled) {
  background: linear-gradient(180deg, #5a4430, #4a3828);
  border-color: rgba(255,215,0,0.4);
}
.mem-cell-active {
  background: linear-gradient(180deg, #FFD700, #F9A825);
  border-color: #8B6914;
  box-shadow: 0 0 12px rgba(255,215,0,0.5), 0 2px 6px rgba(0,0,0,0.3);
  transform: scale(1.05);
}
.mem-cell-selected {
  background: linear-gradient(180deg, #6a5438, #5a4430);
  border-color: #FFD700;
  box-shadow: 0 0 8px rgba(255,215,0,0.3);
}
.mem-cell-correct {
  background: linear-gradient(180deg, #4CAF50, #2E7D32);
  border-color: #27AE60;
  box-shadow: 0 0 10px rgba(76,175,80,0.4);
}
.mem-cell-missed {
  background: linear-gradient(180deg, #FF9800, #E65100);
  border-color: #FF6D00;
  box-shadow: 0 0 10px rgba(255,152,0,0.4);
}
.mem-cell-wrong {
  background: linear-gradient(180deg, #f44336, #c62828);
  border-color: #d32f2f;
  box-shadow: 0 0 10px rgba(244,67,54,0.4);
}

/* Sequence cells */
.mem-seq-cell {
  width: 44px;
  height: 44px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Fredoka', sans-serif;
  font-size: 20px;
  color: #f0e6d0;
  font-weight: 800;
  border: 2px solid rgba(139,105,20,0.4);
}
.mem-seq-active {
  background: linear-gradient(180deg, #FFD700, #F9A825);
  color: #5D3A00;
  border-color: #8B6914;
  box-shadow: 0 0 14px rgba(255,215,0,0.5);
  transform: scale(1.1);
}
.mem-seq-hidden {
  background: linear-gradient(180deg, #4a3828, #3a2a1c);
  color: rgba(255,215,0,0.3);
  border-color: rgba(139,105,20,0.3);
}
.mem-seq-tapped {
  background: linear-gradient(180deg, #6a5438, #5a4430);
  color: #FFD700;
  border-color: #FFD700;
  box-shadow: 0 0 8px rgba(255,215,0,0.3);
}
.mem-seq-empty {
  background: transparent;
  border: 2px dashed rgba(255,215,0,0.2);
}

/* Number pad */
.mem-numpad-btn {
  width: 44px;
  height: 44px;
  border-radius: 6px;
  background: linear-gradient(180deg, #4a3828, #3a2a1c);
  border: 2px solid rgba(139,105,20,0.4);
  color: #f0e6d0;
  font-family: 'Fredoka', sans-serif;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.1s ease;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
}
.mem-numpad-btn:hover:not(:disabled) {
  background: linear-gradient(180deg, #5a4430, #4a3828);
  border-color: #FFD700;
  color: #FFD700;
}
.mem-numpad-btn:active:not(:disabled) {
  transform: translateY(1px);
  box-shadow: none;
}
.mem-numpad-btn:disabled { opacity: 0.4; cursor: default; }

/* Arrow direction cells */
.mem-arrow-cell {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  background: linear-gradient(180deg, #5a4430, #3e2e20);
  border: 2px solid #8B6914;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #FFD700;
  color: #FFD700;
  box-shadow: 0 0 8px rgba(255,215,0,0.15), 0 2px 6px rgba(0,0,0,0.3);
}

/* Direction selection buttons */
.mem-dir-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px;
  border-radius: 8px;
  background: linear-gradient(180deg, #4a3828, #3a2a1c);
  border: 2px solid rgba(139,105,20,0.4);
  color: #f0e6d0;
  color: #f0e6d0;
  cursor: pointer;
  transition: all 0.12s ease;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.mem-dir-btn:hover:not(:disabled) {
  border-color: #FFD700;
  background: linear-gradient(180deg, #5a4430, #4a3828);
  color: #FFD700;
}
.mem-dir-selected {
  border-color: #FFD700 !important;
  background: linear-gradient(180deg, #6a5438, #5a4430) !important;
  color: #FFD700 !important;
  box-shadow: 0 0 12px rgba(255,215,0,0.3), 0 2px 8px rgba(0,0,0,0.4);
}
.mem-dir-btn:disabled { opacity: 0.5; cursor: default; }

/* Pattern display */
.mem-pattern-display {
  text-align: center;
  padding: 16px 20px;
  background: linear-gradient(180deg, #3a2a1c, #2e2018);
  border: 2px solid #8B6914;
  border-radius: 8px;
  color: #f0e6d0;
  font-family: 'Fredoka', sans-serif;
  font-weight: 700;
  box-shadow: inset 0 1px 0 rgba(255,215,0,0.1), 0 3px 8px rgba(0,0,0,0.4);
}

/* Pattern match options */
.mem-pattern-option {
  width: 100%;
  display: flex;
  align-items: center;
  padding: 10px 14px;
  background: linear-gradient(180deg, #4a3828, #3a2a1c);
  border: 2px solid rgba(139,105,20,0.4);
  border-radius: 6px;
  color: #f0e6d0;
  font-family: 'Fredoka', sans-serif;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.12s ease;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.mem-pattern-option:hover:not(:disabled) {
  border-color: #FFD700;
  background: linear-gradient(180deg, #5a4430, #4a3828);
}
.mem-pattern-selected {
  border-color: #FFD700 !important;
  box-shadow: 0 0 10px rgba(255,215,0,0.3);
}
.mem-pattern-correct {
  border-color: #4CAF50 !important;
  background: linear-gradient(180deg, #2E7D32, #1B5E20) !important;
  box-shadow: 0 0 10px rgba(76,175,80,0.4);
}
.mem-pattern-wrong {
  border-color: #f44336 !important;
  background: linear-gradient(180deg, #c62828, #b71c1c) !important;
  box-shadow: 0 0 10px rgba(244,67,54,0.4);
}

/* Submit button */
.mem-submit-btn {
  display: block;
  padding: 10px 20px;
  background: linear-gradient(180deg, #4CAF50, #2E7D32);
  border: 2px solid #27AE60;
  border-bottom-width: 3px;
  border-radius: 8px;
  color: #fff;
  font-family: 'Fredoka', sans-serif;
  font-size: 15px;
  font-weight: 700;
  text-align: center;
  cursor: pointer;
  transition: all 0.12s ease;
  box-shadow: 0 3px 8px rgba(0,0,0,0.3);
  text-shadow: 0 1px 3px rgba(0,0,0,0.4);
  margin-left: auto;
  margin-right: auto;
}
.mem-submit-btn:hover:not(:disabled) {
  background: linear-gradient(180deg, #66BB6A, #43A047);
  transform: translateY(-1px);
  box-shadow: 0 5px 12px rgba(0,0,0,0.4);
}
.mem-submit-btn:active:not(:disabled) {
  transform: translateY(1px);
  border-bottom-width: 2px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.3);
}
.mem-submit-btn:disabled { opacity: 0.5; cursor: default; }

/* Undo button */
.mem-undo-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px 14px;
  background: linear-gradient(180deg, #5a4430, #3e2e20);
  border: 2px solid #8B6914;
  border-radius: 8px;
  color: #FFD700;
  cursor: pointer;
  transition: all 0.12s ease;
}
.mem-undo-btn:hover:not(:disabled) { filter: brightness(1.15); }
.mem-undo-btn:disabled { opacity: 0.4; cursor: default; }

/* Skip/ready button */
.mem-skip-btn {
  display: block;
  text-align: center;
  font-family: 'Fredoka', sans-serif;
  font-size: 13px;
  font-weight: 700;
  color: rgba(240,230,208,0.6);
  background: none;
  border: none;
  cursor: pointer;
  transition: color 0.12s;
  margin-left: auto;
  margin-right: auto;
}
.mem-skip-btn:hover { color: #FFD700; }

/* Result feedback */
.mem-result {
  text-align: center;
  padding: 10px 20px;
  border-radius: 8px;
  font-family: 'Fredoka', sans-serif;
  font-size: 15px;
  font-weight: 700;
  border: 2px solid;
  text-shadow: 0 1px 3px rgba(0,0,0,0.4);
}
.mem-result-correct {
  background: linear-gradient(180deg, rgba(46,125,50,0.9), rgba(27,94,32,0.9));
  border-color: #4CAF50;
  color: #fff;
  box-shadow: 0 0 12px rgba(76,175,80,0.3);
}
.mem-result-wrong {
  background: linear-gradient(180deg, rgba(198,40,40,0.9), rgba(183,28,28,0.9));
  border-color: #f44336;
  color: #fff;
  box-shadow: 0 0 12px rgba(244,67,54,0.3);
}
